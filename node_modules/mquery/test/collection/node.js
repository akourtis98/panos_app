
<<<<<<< HEAD
var assert = require('assert');
var mongo = require('mongodb');
=======
<<<<<<< HEAD
var assert = require('assert')
var slice = require('sliced')
var mongo = require('mongodb')
var utils = require('../../').utils;
=======
var assert = require('assert');
var mongo = require('mongodb');
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
>>>>>>> f09d3ae3d6463bb3bc841a1f35ac01942f76623a

var uri = process.env.MQUERY_URI || 'mongodb://localhost/mquery';
var db;

<<<<<<< HEAD
exports.getCollection = function(cb) {
  mongo.MongoClient.connect(uri, function(err, db_) {
=======
<<<<<<< HEAD
exports.getCollection = function (cb) {
  mongo.MongoClient.connect(uri, function (err, db_) {
=======
exports.getCollection = function(cb) {
  mongo.MongoClient.connect(uri, function(err, db_) {
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
>>>>>>> f09d3ae3d6463bb3bc841a1f35ac01942f76623a
    assert.ifError(err);
    db = db_;

    var collection = db.collection('stuff');

    // clean test db before starting
<<<<<<< HEAD
=======
<<<<<<< HEAD
    db.dropDatabase(function () {
      cb(null, collection);
    });
  })
}

exports.dropCollection = function (cb) {
  db.dropDatabase(function () {
    db.close(cb);
  })
}
=======
>>>>>>> f09d3ae3d6463bb3bc841a1f35ac01942f76623a
    db.dropDatabase(function() {
      cb(null, collection);
    });
  });
};

exports.dropCollection = function(cb) {
  db.dropDatabase(function() {
    db.close(cb);
  });
};
<<<<<<< HEAD
=======
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
>>>>>>> f09d3ae3d6463bb3bc841a1f35ac01942f76623a
