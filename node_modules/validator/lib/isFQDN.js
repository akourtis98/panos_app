'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
<<<<<<< HEAD
exports.default = isFDQN;
=======
exports.default = isFQDN;
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd

var _assertString = require('./util/assertString');

var _assertString2 = _interopRequireDefault(_assertString);

var _merge = require('./util/merge');

var _merge2 = _interopRequireDefault(_merge);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var default_fqdn_options = {
  require_tld: true,
  allow_underscores: false,
  allow_trailing_dot: false
};

<<<<<<< HEAD
function isFDQN(str, options) {
=======
function isFQDN(str, options) {
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
  (0, _assertString2.default)(str);
  options = (0, _merge2.default)(options, default_fqdn_options);

  /* Remove the optional trailing dot before checking validity */
  if (options.allow_trailing_dot && str[str.length - 1] === '.') {
    str = str.substring(0, str.length - 1);
  }
  var parts = str.split('.');
<<<<<<< HEAD
=======
  for (var i = 0; i < parts.length; i++) {
    if (parts[i].length > 63) {
      return false;
    }
  }
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
  if (options.require_tld) {
    var tld = parts.pop();
    if (!parts.length || !/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {
      return false;
    }
<<<<<<< HEAD
  }
  for (var part, i = 0; i < parts.length; i++) {
    part = parts[i];
=======
    // disallow spaces
    if (/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(tld)) {
      return false;
    }
  }
  for (var part, _i = 0; _i < parts.length; _i++) {
    part = parts[_i];
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
    if (options.allow_underscores) {
      part = part.replace(/_/g, '');
    }
    if (!/^[a-z\u00a1-\uffff0-9-]+$/i.test(part)) {
      return false;
    }
<<<<<<< HEAD
    if (/[\uff01-\uff5e]/.test(part)) {
      // disallow full-width chars
=======
    // disallow full-width chars
    if (/[\uff01-\uff5e]/.test(part)) {
>>>>>>> 0f49b6b741d7ccdaba3978328fe07a9401b1b6cd
      return false;
    }
    if (part[0] === '-' || part[part.length - 1] === '-') {
      return false;
    }
  }
  return true;
}
module.exports = exports['default'];